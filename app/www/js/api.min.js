var picSource,destType,CameraApi={init:function(){picSource=navigator.camera.PictureSourceType,destType=navigator.camera.DestinationType,CameraApi.eventListener()},eventListener:function(){$("#take-photo").click(function(){CameraApi.capturePhoto()}),$("#choose-photo").click(function(){CameraApi.getPhoto(picSource.SAVEDPHOTOALBUM)})},onCaptureSuccess:function(n){$("#profil-img").attr("src","data:image/jpeg;base64,"+n)},onPhotoURISuccess:function(n){$("#profil-img").attr("src",n)},capturePhoto:function(){navigator.camera.getPicture(CameraApi.onCaptureSuccess,CameraApi.onFail,{quality:50,destinationType:destType.DATA_URL,saveToPhotoAlbum:!0})},capturePhotoEdit:function(){navigator.camera.getPicture(CameraApi.onCaptureSuccess,CameraApi.onFail,{quality:20,allowEdit:!0,destinationType:destType.DATA_URL,saveToPhotoAlbum:!0})},getPhoto:function(n){navigator.camera.getPicture(CameraApi.onPhotoURISuccess,CameraApi.onFail,{quality:50,destinationType:destType.FILE_URI,sourceType:n})},onFail:function(n){alert("Failed because: "+n)}},Compass={init:function(){},getCurrent:function(){navigator.compass.getCurrentHeading(Compass.onSuccess,Compass.onError)},onSuccess:function(n){alert("Heading: "+n.magneticHeading)},onError:function(n){alert("Compass Error: "+n.code)}},ContactApi={init:function(){ContactApi.eventListener()},eventListener:function(){$("#find-contact").click(function(){ContactApi.findContacts()})},findContacts:function(){var n=new ContactFindOptions;n.filter="",n.multiple=!0,Loader.start(),navigator.contacts.find(["*"],ContactApi.onSuccess,ContactApi.onError,n)},onSuccess:function(n){$("#contact-list").append(ContactApi.getHtml(n)),Loader.stop()},onError:function(){alert("onError!"),Loader.stop()},getHtml:function(n){for(var e,t,o=[],i="",a=0;a<n.length;a++)n[a].phoneNumbers&&(n[a].displayName&&(e=n[a].displayName),t=n[a].phoneNumbers[0].value,o.push({name:e,phone:t,inDb:!1,lvl:null,login:null}),i+=ContactApi.prepareNew(e,t));return i},prepareNew:function(n,e){return"<li>"+n+" ("+e+") - Inviter</li>"}},Globalization={init:function(){navigator.globalization.getPreferredLanguage(function(n){alert("language: "+n.value+"\n"),Globalization.setLocal(n.value),Globalization.changeMsg()},function(){alert("Error getting language\n")})},setLocal:function(n){localLanguage=n},changeMsg:function(){var n=$("#langTitle");"fr-FR"==localLanguage?n.text("Bienvenue"):n.text("Welcome")}},GoogleAnalytics={init:function(){window.analytics.startTrackerWithId("UA-76476127-1"),googleAnalytics.eventListener()},eventListener:function(){$("#send-analytics").click(function(){googleAnalytics.sendAnalytics()})},sendAnalytics:function(){window.analytics.trackView("Toutes les données de l'application mobile"),window.analytics.trackEvent("Category","Action","Label",10)}},Network={checkConnection:function(){var n=navigator.connection.type,e={};e[Connection.UNKNOWN]="Unknown connection",e[Connection.ETHERNET]="Ethernet connection",e[Connection.WIFI]="WiFi connection",e[Connection.CELL_2G]="Cell 2G connection",e[Connection.CELL_3G]="Cell 3G connection",e[Connection.CELL_4G]="Cell 4G connection",e[Connection.CELL]="Cell generic connection",e[Connection.NONE]="No network connection",alert("Connection type: "+e[n])}},Sharing={tool:null,headline:"Rejoignez-moi sur Gwynt ! Et tentez de me défier !",init:function(){Sharing.tool=window.plugins.socialsharing},shareFb:function(){Sharing.tool.shareViaFacebook(Sharing.headline,null,null,Sharing.onSuccess,Sharing.onError)},shareTwitter:function(){Sharing.tool.shareViaTwitter(Sharing.headline)},onSuccess:function(){console.log("share ok")},onError:function(n){alert(n)}};