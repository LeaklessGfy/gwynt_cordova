var pictureSource,destinationType,camera={init:function(){pictureSource=navigator.camera.PictureSourceType,destinationType=navigator.camera.DestinationType,camera.eventListener()},eventListener:function(){$("#take-photo").click(function(){camera.capturePhoto()}),$("#choose-photo").click(function(){camera.getPhoto(pictureSource.SAVEDPHOTOALBUM)})},onCaptureSuccess:function(n){$("#profil-img").attr("src","data:image/jpeg;base64,"+n)},onPhotoURISuccess:function(n){$("#profil-img").attr("src",n)},capturePhoto:function(){navigator.camera.getPicture(camera.onCaptureSuccess,camera.onFail,{quality:50,destinationType:destinationType.DATA_URL,saveToPhotoAlbum:!0})},capturePhotoEdit:function(){navigator.camera.getPicture(camera.onCaptureSuccess,camera.onFail,{quality:20,allowEdit:!0,destinationType:destinationType.DATA_URL,saveToPhotoAlbum:!0})},getPhoto:function(n){navigator.camera.getPicture(camera.onPhotoURISuccess,camera.onFail,{quality:50,destinationType:destinationType.FILE_URI,sourceType:n})},onFail:function(n){alert("Failed because: "+n)}},compass={init:function(){},onSuccess:function(n){n.magneticHeading>300},onError:function(n){}},ContactApi=function(){this.contacts=[],this.eventListener()};ContactApi.prototype.eventListener=function(){$("#find-contact").click(function(){ContactApi.findContacts()}),$("#synchronize-contact").click(function(){ContactApi.synchronize()})},ContactApi.prototype.findContacts=function(){var n=new ContactFindOptions;n.filter="",n.multiple=!0,Loader.start(),navigator.contacts.find(["*"],this.onSuccess,this.onError,n)},ContactApi.prototype.onSuccess=function(n){for(var t,e=[],o="",i="Default",a=0;a<n.length;a++)n[a].phoneNumbers&&(n[a].displayName&&(i=n[a].displayName),t=n[a].phoneNumbers[0].value,e.push({name:i,phone:t,inDb:!1,lvl:null,login:null}),o+=ContactApi.preparedNew(i,t));$("#contact-list").append(o),ContactApi.contacts=e,Loader.stop()},ContactApi.prototype.onError=function(n){alert("onError!")},ContactApi.prototype.synchronize=function(){ApiCaller.get("users",[],function(n){for(var t,e=ContactApi.contacts,o=e.length,i=0;o>i;i++)t=ContactApi.isRegistered(e[i].phone,n.content),t&&alert("Kangourou")},ApiCaller.handleError)},ContactApi.prototype.isRegistered=function(n,t){for(var e=t.length,o=0;e>o;o++)if(t[o].phone==n)return t[o]},ContactApi.prototype.preparedNew=function(n,t){return"<li>"+n+" ("+t+") - Inviter</li>"};var globalization={init:function(){navigator.globalization.getPreferredLanguage(function(n){alert("language: "+n.value+"\n"),app.setLocal(n.value),globalization.changeMsg()},function(){alert("Error getting language\n")})},changeMsg:function(){var n=$("#langTitle");"fr-FR"==localLanguage?n.text("Bienvenue"):n.text("Welcome")}},googleAnalytics={init:function(){window.analytics.startTrackerWithId("UA-76476127-1"),googleAnalytics.eventListener()},eventListener:function(){$("#send-analytics").click(function(){googleAnalytics.sendAnalytics()})},sendAnalytics:function(){window.analytics.trackView("Toutes les donn√©es de l'application mobile"),window.analytics.trackEvent("Category","Action","Label",10)}},network={checkConnection:function(){var n=navigator.connection.type,t={};t[Connection.UNKNOWN]="Unknown connection",t[Connection.ETHERNET]="Ethernet connection",t[Connection.WIFI]="WiFi connection",t[Connection.CELL_2G]="Cell 2G connection",t[Connection.CELL_3G]="Cell 3G connection",t[Connection.CELL_4G]="Cell 4G connection",t[Connection.CELL]="Cell generic connection",t[Connection.NONE]="No network connection",alert("Connection type: "+t[n])}};