var pictureSource,destinationType,camera={init:function(){pictureSource=navigator.camera.PictureSourceType,destinationType=navigator.camera.DestinationType,camera.eventListener()},eventListener:function(){$("#take-picture").click(function(){camera.capturePhoto()}),$("#choose-picture").click(function(){camera.getPhoto(pictureSource.SAVEDPHOTOALBUM)})},onPhotoURISuccess:function(t){var n=document.getElementById("largeImage");n.style.display="block",n.src=t},capturePhoto:function(){navigator.camera.getPicture(Hydrator.onCaptureSuccess,camera.onFail,{quality:50,destinationType:destinationType.DATA_URL,saveToPhotoAlbum:!0})},capturePhotoEdit:function(){navigator.camera.getPicture(Hydrator.onCaptureSuccess,camera.onFail,{quality:20,allowEdit:!0,destinationType:destinationType.DATA_URL,saveToPhotoAlbum:!0})},getPhoto:function(t){navigator.camera.getPicture(camera.onPhotoURISuccess,camera.onFail,{quality:50,destinationType:destinationType.FILE_URI,sourceType:t})},onFail:function(t){alert("Failed because: "+t)}},ContactApi=function(){this.contacts=[],this.eventListener()};ContactApi.prototype.eventListener=function(){$("#find-contact").click(function(){ContactApi.findContacts()})},ContactApi.prototype.process=function(t){var n,e,a,o=[],i=t.content,c=ContactApi.contacts;alert(JSON.stringify(i));for(var r=0;r<c.length;r++)if(c[r].displayName&&c[r].phoneNumbers){if(n=c[r].displayName,e=c[r].phoneNumbers[0].value,a=ContactApi.isRegistered(e,i)){o.push({name:n,phone:e,inDb:!0,lvl:a.lvl});continue}o.push({name:n,phone:e,inDb:!1,lvl:null})}Hydrator.hydrateContact(o)},ContactApi.prototype.findContacts=function(){var t=new ContactFindOptions;t.filter="",t.multiple=!0,navigator.contacts.find(["*"],this.onSuccess,this.onError,t)},ContactApi.prototype.onSuccess=function(t){ContactApi.contacts=t,ApiCaller.get("users",[],ContactApi.process,ApiCaller.handleError)},ContactApi.prototype.isRegistered=function(t,n){for(var e=n.length,a=0;e>a;a++)if(n[a].phone==t)return n[a]},ContactApi.prototype.onError=function(t){alert("onError!")};var globalization={init:function(){navigator.globalization.getPreferredLanguage(function(t){alert("language: "+t.value+"\n"),app.setLocal(t.value),globalization.changeMsg()},function(){alert("Error getting language\n")})},changeMsg:function(){var t=$("#langTitle");"fr-FR"==localLanguage?t.text("Bienvenue"):t.text("Welcome")}},googleAnalytics={init:function(){window.analytics.startTrackerWithId("UA-76476127-1"),googleAnalytics.eventListener()},eventListener:function(){$("#send-analytics").click(function(){googleAnalytics.sendAnalytics()})},sendAnalytics:function(){window.analytics.trackView("Toutes les donn√©es de l'application mobile"),window.analytics.trackEvent("Category","Action","Label",10)}};