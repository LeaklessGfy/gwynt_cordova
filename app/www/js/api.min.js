var pictureSource,destinationType,camera={init:function(){pictureSource=navigator.camera.PictureSourceType,destinationType=navigator.camera.DestinationType,camera.eventListener()},eventListener:function(){$("#take-photo").click(function(){camera.capturePhoto()}),$("#choose-photo").click(function(){camera.getPhoto(pictureSource.SAVEDPHOTOALBUM)})},onCaptureSuccess:function(t){$("#profil-img").attr("src","data:image/jpeg;base64,"+t)},onPhotoURISuccess:function(t){$("#profil-img").attr("src",t)},capturePhoto:function(){navigator.camera.getPicture(camera.onCaptureSuccess,camera.onFail,{quality:50,destinationType:destinationType.DATA_URL,saveToPhotoAlbum:!0})},capturePhotoEdit:function(){navigator.camera.getPicture(camera.onCaptureSuccess,camera.onFail,{quality:20,allowEdit:!0,destinationType:destinationType.DATA_URL,saveToPhotoAlbum:!0})},getPhoto:function(t){navigator.camera.getPicture(camera.onPhotoURISuccess,camera.onFail,{quality:50,destinationType:destinationType.FILE_URI,sourceType:t})},onFail:function(t){alert("Failed because: "+t)}},compass={init:function(){navigator.compass.getCurrentHeading(compass.onSuccess,compass.onError)},onSuccess:function(t){alert("Heading: "+t.magneticHeading)},onError:function(t){alert("Compass Error: "+t.code)}},ContactApi=function(){this.contacts=[],this.eventListener()};ContactApi.prototype.eventListener=function(){$("#find-contact").click(function(){ContactApi.findContacts()}),$("#synchronize-contact").click(function(){ContactApi.synchronize()})},ContactApi.prototype.findContacts=function(){var t=new ContactFindOptions;t.filter="",t.multiple=!0,Loader.start(),navigator.contacts.find(["*"],this.onSuccess,this.onError,t)},ContactApi.prototype.onSuccess=function(t){for(var n,e=[],o="",a="Default",i=0;i<t.length;i++)t[i].phoneNumbers&&(t[i].displayName&&(a=t[i].displayName),n=t[i].phoneNumbers[0].value,e.push({name:a,phone:n,inDb:!1,lvl:null,login:null}),o+=ContactApi.preparedNew(a,n));$("#contact-list").append(o),ContactApi.contacts=e,Loader.stop()},ContactApi.prototype.onError=function(t){alert("onError!")},ContactApi.prototype.synchronize=function(){ApiCaller.get("users",[],function(t){for(var n,e=ContactApi.contacts,o=e.length,a=0;o>a;a++)n=ContactApi.isRegistered(e[a].phone,t.content),n&&alert("Kangourou")},ApiCaller.handleError)},ContactApi.prototype.isRegistered=function(t,n){for(var e=n.length,o=0;e>o;o++)if(n[o].phone==t)return n[o]},ContactApi.prototype.preparedNew=function(t,n){return"<li>"+t+" ("+n+") - Inviter</li>"};var globalization={init:function(){navigator.globalization.getPreferredLanguage(function(t){alert("language: "+t.value+"\n"),app.setLocal(t.value),globalization.changeMsg()},function(){alert("Error getting language\n")})},changeMsg:function(){var t=$("#langTitle");"fr-FR"==localLanguage?t.text("Bienvenue"):t.text("Welcome")}},googleAnalytics={init:function(){window.analytics.startTrackerWithId("UA-76476127-1"),googleAnalytics.eventListener()},eventListener:function(){$("#send-analytics").click(function(){googleAnalytics.sendAnalytics()})},sendAnalytics:function(){window.analytics.trackView("Toutes les donn√©es de l'application mobile"),window.analytics.trackEvent("Category","Action","Label",10)}};