var picSource,destType,CameraApi={init:function(){picSource=navigator.camera.PictureSourceType,destType=navigator.camera.DestinationType,CameraApi.eventListener()},eventListener:function(){$("#take-photo").click(function(){CameraApi.capturePhoto()}),$("#choose-photo").click(function(){CameraApi.getPhoto(picSource.SAVEDPHOTOALBUM)})},onCaptureSuccess:function(n){$("#profil-img").attr("src","data:image/jpeg;base64,"+n)},onPhotoURISuccess:function(n){$("#profil-img").attr("src",n)},capturePhoto:function(){navigator.camera.getPicture(CameraApi.onCaptureSuccess,CameraApi.onFail,{quality:50,destinationType:destType.DATA_URL,saveToPhotoAlbum:!0})},capturePhotoEdit:function(){navigator.camera.getPicture(CameraApi.onCaptureSuccess,CameraApi.onFail,{quality:20,allowEdit:!0,destinationType:destType.DATA_URL,saveToPhotoAlbum:!0})},getPhoto:function(n){navigator.camera.getPicture(CameraApi.onPhotoURISuccess,CameraApi.onFail,{quality:50,destinationType:destType.FILE_URI,sourceType:n})},onFail:function(n){alert("Failed because: "+n)}},CompassApi={getCurrent:function(){navigator.compass.getCurrentHeading(CompassApi.onSuccess,CompassApi.onError)},onSuccess:function(n){alert("Heading: "+n.magneticHeading)},onError:function(n){alert("Compass Error: "+n.code)}},ContactApi={init:function(){ContactApi.eventListener()},eventListener:function(){$("#find-contact").click(function(){ContactApi.findContacts()})},findContacts:function(){Loader.start();var n=new ContactFindOptions;n.filter="",n.multiple=!0,navigator.contacts.find(["*"],ContactApi.onSuccess,ContactApi.onError,n)},onSuccess:function(n){$("#contact-list").append(ContactApi.getHtml(n)),Loader.stop()},onError:function(){Loader.stop(),alert("onError!")},getHtml:function(n){for(var t,o,e=[],i="",a=0;a<n.length;a++)n[a].phoneNumbers&&(n[a].displayName&&(t=n[a].displayName),o=n[a].phoneNumbers[0].value,e.push({name:t,phone:o,inDb:!1,lvl:null,login:null}),i+=ContactApi.prepareNew(t,o));return i},prepareNew:function(n,t){return"<li>"+n+" ("+t+") - Inviter</li>"}},GeolocApi={getLocalisation:function(){Loader.start(),navigator.geolocation.getCurrentPosition(GeolocApi.onSuccess,GeolocApi.onError)},onSuccess:function(n){Loader.stop(),alert("Latitude: "+n.coords.latitude+"\nLongitude: "+n.coords.longitude+"\nAltitude: "+n.coords.altitude+"\nAccuracy: "+n.coords.accuracy+"\nAltitude Accuracy: "+n.coords.altitudeAccuracy+"\nHeading: "+n.coords.heading+"\nSpeed: "+n.coords.speed+"\nTimestamp: "+n.timestamp+"\n")},onError:function(n){Loader.stop(),alert("code: "+n.code+"\nmessage: "+n.message+"\n")}},GlobalizationApi={getCurrentLocal:function(){navigator.globalization.getPreferredLanguage(GlobalizationApi.onSuccess,GlobalizationApi.onError)},onSuccess:function(n){alert("language: "+n.value+"\n"),Globalization.setLocal(n.value),Globalization.changeMsg()},onError:function(){alert("Error getting language\n")},setLocal:function(n){localLanguage=n},changeMsg:function(){var n=$("#langTitle");"fr-FR"==localLanguage?n.text("Bienvenue"):n.text("Welcome")}},GoogleAnalyticsApi={init:function(){window.analytics.startTrackerWithId("UA-76476127-1"),GoogleAnalyticsApi.sendAnalytics()},eventListener:function(){$("#send-analytics").click(function(){GoogleAnalyticsApi.sendAnalytics()})},sendAnalytics:function(){window.analytics.trackView("Toutes les données de l'application mobile"),window.analytics.trackEvent("Category","Action","Label",10),alert("Info send")}},LocalStorageApi={init:function(){LocalStorageApi.eventListener()},eventListener:function(){$("#btn-pseudo").click(function(){LocalStorageApi.changeProfil()}),$("#btn-bg").click(function(){LocalStorageApi.changeBackground()})},changeProfil:function(){var n=$("#pseudo-form").val();""!=n&&(localStorage.setItem("login",n),$("#pseudo-c").text(n))},changeBackground:function(){var n=$("#bg-form").val();""!=n&&(localStorage.setItem("bg",n),$(".page-content").removeClass("bg1 bg2"),$(".page-content").addClass("bg"+n))}},NetworkApi={checkConnection:function(){var n=navigator.connection.type,t={};t[Connection.UNKNOWN]="Unknown connection",t[Connection.ETHERNET]="Ethernet connection",t[Connection.WIFI]="WiFi connection",t[Connection.CELL_2G]="Cell 2G connection",t[Connection.CELL_3G]="Cell 3G connection",t[Connection.CELL_4G]="Cell 4G connection",t[Connection.CELL]="Cell generic connection",t[Connection.NONE]="No network connection",alert("Connection type: "+t[n])}},SharingApi={tool:null,headline:"Rejoignez-moi sur Gwynt ! Et tentez de me défier !",init:function(){SharingApi.tool=window.plugins.socialsharing},shareFb:function(){SharingApi.tool.shareViaFacebook(SharingApi.headline,null,null,SharingApi.onSuccess,SharingApi.onError)},shareTwitter:function(){SharingApi.tool.shareViaTwitter(SharingApi.headline)},onSuccess:function(){console.log("share ok")},onError:function(n){alert(n)}},StatusBarApi={status:0,init:function(){0==StatusBarApi.status?(StatusBar.show(),StatusBar.backgroundColorByHexString("#40A497"),StatusBarApi.status=1):(StatusBar.hide(),StatusBarApi.status=0)}};