var fightPage={init:function(e){if(SongCaller.play("fight.mp3",0),fightPage.eventListener(),"test"==e){var t={login:"Test adv",lvl:12};fightPage.setupFight(t)}else ApiCaller.get("users/"+e,{},fightPage.setupFight,ApiCaller.onError)},eventListener:function(){$("#fight-end").click(function(){SongCaller.resetLoop()})},setupFight:function(e){$("#player1 .name").text(e.login),fightPage.chooseCards()},chooseCards:function(){var e=$("#choose-cards");HydratorCaller.hydrate(e,$("#main-content"),"fight/overlay.html",null,function(){alert("success")})},submitCards:function(){$("#choose-cards").hide(),SongCaller.resetLoop(),SongCaller.play("fight-interlude.mp3",2)}},playPage={init:function(){SongCaller.play("play.mp3",5),playPage.getFights()},eventListener:function(){$(".page-fight").on("click",function(){SongCaller.resetLoop(),app.fightPage($(this).data("id"))}),$("#play-end").click(function(){SongCaller.resetLoop(),app.init()})},getFights:function(){ApiCaller.get("users",{free:1},playPage.onGetSuccess,ApiCaller.onError)},onGetSuccess:function(e){for(var t="",n=0;n<e.length;n++)t+='<li><a href="#" class="item-link item-content page-fight" data-id="'+e[n].id+'"><div class="item-media"><i class="icon icon-f7"></i></div><div class="item-inner"><div class="item-title">'+e[n].login+" (lvl. "+e[n].level+') </div><div class="item-after">Affronter</div></div></a></li>';$("#play .content ul").append(t),playPage.eventListener()}},profilInfo,contactInfo,appender,profilPage={init:function(){profilPage.eventListener(),profilPage.refreshDomObject(),profilPage.showProfilInfo()},eventListener:function(){$("#profil .sub-menu li a").click(function(){profilPage.handleMenu($(this)),profilPage.handleContent($(this).data("id"))})},refreshDomObject:function(){profilInfo=$("#profil-info"),contactInfo=$("#contact-info"),appender=$("#profil .content")},handleMenu:function(e){$("#profil .sub-menu li a").removeClass("actif"),e.addClass("actif")},handleContent:function(e){"profil-info"==e?profilPage.showProfilInfo():profilPage.showContactInfo()},showProfilInfo:function(){profilPage.refreshDomObject(),HydratorCaller.hydrate(profilInfo,appender,"profil/profil-info.html",contactInfo,profilPage.onProfilSuccess)},showContactInfo:function(){profilPage.refreshDomObject(),HydratorCaller.hydrate(contactInfo,appender,"profil/contact-info.html",profilInfo,profilPage.onContactSuccess)},onProfilSuccess:function(){CameraApi.init(),$("#pseudo-c").text(localStorage.getItem("login")),$(".page-content").addClass("bg"+localStorage.getItem("bg")),LocalStorageApi.init()},onContactSuccess:function(){ContactApi.init()}};